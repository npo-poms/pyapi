# pyapi
Python scripts to talk to the NPO api

#How to install

You need a [python3](https://www.python.org/downloads/) installation.

Then you can install the python libraries and command line scripts with the following command
```
pip3 install git+git://github.com/npo-poms/pyapi.git
```

Then you can do:
```bash
michiel@belono:~$ npo_media_get.py POMS_NTR_388772
No configuration file found. Now creating.
Your NPO api key?:
Your NPO api secret?:
Your NPO api origin?:
{"objectType":"program","mid":"POMS_NTR_388772","type":"BROADCAST","avType":"AUDIO","workflow":"PUBLISHED","sortDate":1376395200000,"creationDate":1376435075424,"lastModified":1376435112166,"urn":"urn:vpro:media:program:28506247","embeddable":true,"episodeOf":[{"midRef":"AUTO_WINFRIEDDRAAITDOOR","urnRef":"urn:vpro:media:group:13405810","type":"SERIES","index":1,"highlighted":false,"added":1376435078278}],"crids":["crid://broadcast.radiobox2/203820"],"broadcasters":[{"id":"NTR","value":"NTR"}],"titles":[{"value":"Winfried Draait Door","owner":"RADIOBOX","type":"MAIN"}],"descriptions":[{"value":"Elke werkdag draait Winfried Baijens door op Radio 6 met de beste soul en jazz, nieuwe releases, Nederlands talent en de mooiste prijzen. Geen dag gaat voorbij zonder een thema dat veelal iets te maken heeft met de actualiteit. Voorwaarde is; het thema moet allitereren. Daar houdt Winfried namelijk van, allitereren.\nVerder hoor je berichten van nationale en internationale sterren, luisteraars, betrokkenen bij het thema en muziekvrienden die Winfrieds voicemail inspreken. DJ Git Hyper is een vaste gast en Winfried maakt ook een muzikale kettingbrief. Vele grote namen uit de Nederlandse muziekwereld werkten al mee aan deze multitracks.","owner":"RADIOBOX","type":"MAIN"}],"genres":[],"countries":[],"languages":[],"duration":7200000,"descendantOf":[{"midRef":"AUTO_WINFRIEDDRAAITDOOR","urnRef":"urn:vpro:media:group:13405810","type":"SERIES"},{"midRef":"POMS_S_VPRO_171668","urnRef":"urn:vpro:media:group:14683553","type":"ARCHIVE"},{"midRef":"POMS_S_VPRO_218686","urnRef":"urn:vpro:media:group:14921825","type":"ARCHIVE"},{"midRef":"POMS_S_VPRO_117474","urnRef":"urn:vpro:media:group:20347947","type":"PLAYLIST"}],"email":["winfrieddraaitdoor@radio6.nl"],"websites":[{"value":"http://www.radio6.nl/winfrieddraaitdoor"}],"predictions":[{"state":"REALIZED","platform":"INTERNETVOD"}],"locations":[{"programUrl":"http://download.omroep.nl/audiologging/r6/2013/08/13/1400_1600_winfried_draait_door.mp3","avAttributes":{"avFileFormat":"MP3"},"duration":7200000,"owner":"RADIOBOX","creationDate":1376435052113,"lastModified":1376435075571,"workflow":"PUBLISHED","urn":"urn:vpro:media:location:28506251"}],"scheduleEvents":[{"start":1376395200000,"duration":7200000,"poProgID":"POMS_NTR_388772","channel":"RAD6","urnRef":"urn:vpro:media:program:28506247","midRef":"POMS_NTR_388772"}],"images":[{"title":"winfried_baijens.jpg","description":"Winfried Draait Door","imageUri":"urn:vpro:image:121034","owner":"RADIOBOX","type":"PICTURE","highlighted":false,"creationDate":1376435059364,"lastModified":1376435075570,"workflow":"PUBLISHED","urn":"urn:vpro:media:image:28506249"}]}
```

Or e.g.
```bash
$ npo_schedule_get.py 
{"total":921114,"offset":0,"max":10,"items":[{"channel":"NED1","start":74016000000,"guideDay":73954800000,"duration":2062000,"urnRef":"urn:vpro:media:program:19222530","midRef":"immix_116032","media":{"objectType":"program","mid":"immix_116032","type":"BROADCAST","avType":"VIDEO","sortDate":74016000000,"urn":"urn:vpro:media:program:19222530","embeddable":true,"broadcasters":[{"id":"NOS","value":"NOS"}],"titles":[{"value":"RUSLAND EN DE RUIMTE","owner":"NEBO","type":"MAIN"},{"value":"RUSLAND EN DE RUIMTE","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED1","start":224801400000,"guideDay":224722800000,"duration":2291000,"urnRef":"urn:vpro:media:program:18855692","midRef":"immix_113992","media":{"objectType":"program","mid":"immix_113992","type":"BROADCAST","avType":"VIDEO","sortDate":224801400000,"urn":"urn:vpro:media:program:18855692","embeddable":true,"broadcasters":[{"id":"KRO","value":"KRO"}],"titles":[{"value":"EEN BRIEF UIT LIBANON","owner":"NEBO","type":"MAIN"},{"value":"EEN BRIEF UIT LIBANON","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED1","start":282775200000,"guideDay":282697200000,"duration":3291000,"urnRef":"urn:vpro:media:program:18801622","midRef":"immix_136584","media":{"objectType":"program","mid":"immix_136584","type":"BROADCAST","avType":"VIDEO","sortDate":282775200000,"urn":"urn:vpro:media:program:18801622","embeddable":true,"broadcasters":[{"id":"TROS","value":"TROS"}],"titles":[{"value":"DE VORMGEVERS","owner":"NEBO","type":"MAIN"},{"value":"Het dak van de stad","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED2","start":292363200000,"guideDay":292284000000,"duration":3163000,"urnRef":"urn:vpro:media:program:18187652","midRef":"immix_115078","media":{"objectType":"program","mid":"immix_115078","type":"BROADCAST","avType":"VIDEO","sortDate":292363200000,"urn":"urn:vpro:media:program:18187652","embeddable":true,"broadcasters":[{"id":"VPRO","value":"VPRO"}],"titles":[{"value":"SUN CITY","owner":"NEBO","type":"MAIN"},{"value":"SUN CITY","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED2","start":380147400000,"guideDay":380070000000,"duration":3151000,"urnRef":"urn:vpro:media:program:18187672","midRef":"immix_128235","media":{"objectType":"program","mid":"immix_128235","type":"BROADCAST","avType":"VIDEO","sortDate":380147400000,"urn":"urn:vpro:media:program:18187672","embeddable":true,"broadcasters":[{"id":"VPRO","value":"VPRO"}],"titles":[{"value":"TIJDVERSCHIJNSELEN","owner":"NEBO","type":"MAIN"},{"value":"Sloop of herstel","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED2","start":380749500000,"guideDay":380674800000,"duration":1919000,"urnRef":"urn:vpro:media:program:18187692","midRef":"immix_116441","media":{"objectType":"program","mid":"immix_116441","type":"BROADCAST","avType":"VIDEO","sortDate":380749500000,"urn":"urn:vpro:media:program:18187692","embeddable":true,"broadcasters":[{"id":"VPRO","value":"VPRO"}],"titles":[{"value":"WELKOM IN HET LEVEN, LIEVE KLEINE (BIS)","owner":"NEBO","type":"MAIN"},{"value":"WELKOM IN HET LEVEN, LIEVE KLEINE (BIS)","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED1","start":386691000000,"guideDay":386632800000,"duration":882000,"urnRef":"urn:vpro:media:program:18446306","midRef":"immix_11716","media":{"objectType":"program","mid":"immix_11716","type":"BROADCAST","avType":"VIDEO","sortDate":386691000000,"urn":"urn:vpro:media:program:18446306","embeddable":true,"broadcasters":[{"id":"AVRO","value":"AVRO"}],"titles":[{"value":"STUIF ES IN","owner":"NEBO","type":"MAIN"},{"value":"Cura√ßao","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED2","start":416867100000,"guideDay":416790000000,"duration":2736000,"urnRef":"urn:vpro:media:program:18855712","midRef":"immix_113672","media":{"objectType":"program","mid":"immix_113672","type":"BROADCAST","avType":"VIDEO","sortDate":416867100000,"urn":"urn:vpro:media:program:18855712","embeddable":true,"broadcasters":[{"id":"KRO","value":"KRO"}],"titles":[{"value":"GOOI EEN ATOOMBOM OP DE PALESTIJNEN","owner":"NEBO","type":"MAIN"},{"value":"GOOI EEN ATOOMBOM OP DE PALESTIJNEN","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"NED1","start":418334400000,"guideDay":418255200000,"duration":3546000,"urnRef":"urn:vpro:media:program:18855732","midRef":"immix_116479","media":{"objectType":"program","mid":"immix_116479","type":"BROADCAST","avType":"VIDEO","sortDate":418334400000,"urn":"urn:vpro:media:program:18855732","embeddable":true,"broadcasters":[{"id":"KRO","value":"KRO"}],"titles":[{"value":"TEPITO SI","owner":"NEBO","type":"MAIN"},{"value":"TEPITO SI","owner":"NEBO","type":"SUB"}],"genres":[],"countries":[],"languages":[]}},{"channel":"RAD1","start":473954400000,"guideDay":473900400000,"duration":3600,"urnRef":"urn:vpro:media:program:9457477","midRef":"POMS_VPRO_202750","media":{"objectType":"program","mid":"POMS_VPRO_202750","type":"BROADCAST","avType":"AUDIO","sortDate":473954400000,"urn":"urn:vpro:media:program:9457477","embeddable":true,"broadcasters":[{"id":"VPRO","value":"VPRO"}],"titles":[{"value":"Een uur Ischa","owner":"BROADCASTER","type":"MAIN"},{"value":"Afl.1: Vera Beths","owner":"BROADCASTER","type":"SUB"}],"genres":[],"countries":[],"languages":[]}}]}
```
